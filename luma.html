<!-- payment.html – fixed “Copy Booking ID / Email” buttons & unique IDs -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cafe Kyaa! – Payment</title>

    <!-- Quicksand + Tailwind -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      :root {
        --sat: env(safe-area-inset-top, 0);
        --sab: env(safe-area-inset-bottom, 0);
      }
      html {
        --vh: 1vh;
      }
      body {
        font-family: "Quicksand", sans-serif;
        min-height: calc(var(--vh) * 100);
        padding: var(--sat) 0 var(--sab);
        background: linear-gradient(
          -60deg,
          #fff1f2 0%,
          #ffe4e6 25%,
          #fce7f3 50%,
          #ffe5f8 75%,
          #fff1f2 100%
        );
        background-size: 400% 400%;
        animation: grad 18s ease infinite;
      }
      @keyframes grad {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      @keyframes glow {
        0% {
          box-shadow: 0 0 5px rgba(255, 0, 0, 0.4);
        }
        50% {
          box-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
        }
        100% {
          box-shadow: 0 0 5px rgba(255, 0, 0, 0.4);
        }
      }
      .glow-animation {
        animation: glow 1.5s ease-in-out infinite;
      }
    </style>
  </head>
  <body class="text-gray-800">
    <!-- header -->
    <header
      class="fixed inset-x-0 top-0 bg-white/60 backdrop-blur-md shadow-sm z-40"
    >
      <div class="flex items-center h-14 px-4">
        <a href="index.html" class="flex items-center hover:opacity-80">
          <img src="logo.png" class="h-10 w-10 rounded-full" alt="logo" />
          <h1
            class="ml-2 text-lg font-bold bg-gradient-to-r from-pink-600 to-rose-500 bg-clip-text text-transparent uppercase tracking-wide"
          >
            Cafe Kyaa!
          </h1>
        </a>
        <span
          class="ml-auto text-xs font-medium text-rose-600 whitespace-nowrap"
        >
          Anime India 2025 · Mumbai
        </span>
      </div>
    </header>

    <!-- main -->
    <main class="pt-20 flex flex-col items-center p-4">
      <section
        class="w-full max-w-3xl bg-white rounded-2xl shadow-xl p-8 space-y-6 border border-pink-200"
      >
        <!-- order-summary | stacked info layout -->
        <div
          class="relative isolate overflow-hidden rounded-2xl bg-gradient-to-br from-rose-50 to-pink-50 p-6 shadow-lg ring-1 ring-inset ring-rose-100/60"
        >
          <!-- decorative blobs -->
          <span
            aria-hidden="true"
            class="absolute -top-8 -left-8 h-32 w-32 rounded-full bg-rose-100/60 blur-3xl"
          ></span>
          <span
            aria-hidden="true"
            class="absolute -bottom-10 -right-6 h-32 w-32 rounded-full bg-pink-200/60 blur-3xl pointer-events-none"
          ></span>

          <!-- HEADER -->
          <header
            class="relative flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"
          >
            <!-- icon & title -->
            <div class="flex items-center gap-3">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="h-10 w-10 shrink-0 text-pink-600"
                aria-hidden="true"
              >
                <title>Ticket icon</title>
                <path
                  fill-rule="evenodd"
                  d="M2.25 9.75A2.25 2.25 0 0 1 4.5 7.5h15a2.25 2.25 0 0 1 2.25 2.25v1.08a3.219 3.219 0 0 0 0 6.42v1.08A2.25 2.25 0 0 1 19.5 21h-15A2.25 2.25 0 0 1 2.25 18.75v-1.08a3.219 3.219 0 0 0 0-6.42V9.75zM12 9a.75.75 0 0 0-.75.75v.75h1.5V9.75A.75.75 0 0 0 12 9zm-.75 3h1.5v1.5h-1.5V12zm1.5 4.5h-1.5V18a.75.75 0 0 0 1.5 0v-1.5z"
                  clip-rule="evenodd"
                />
              </svg>
              <div>
                <h2
                  class="text-xl font-bold tracking-wide text-gray-800 sm:text-2xl"
                >
                  Reserve Your Slot!
                </h2>
                <p class="text-xs font-medium text-gray-600">
                  Cafe Kyaa! Tickets
                </p>
              </div>
            </div>

            <!-- price summary -->
            <dl class="text-right">
              <dt class="sr-only">Seats</dt>
              <dd
                class="text-lg font-semibold text-gray-800 tabular-nums sm:text-2xl"
              >
                <span id="seatCount">0</span> seat(s)
              </dd>
              <dt class="sr-only">Price per seat</dt>
              <dd class="text-sm font-medium text-gray-600">@ ₹500 each</dd>
              <dt class="sr-only">Total</dt>
              <dd class="text-lg font-extrabold text-pink-700 sm:text-2xl">
                ₹<span id="amtTitle">0</span>
              </dd>
            </dl>
          </header>

          <!-- INFO (stacked for narrow screens) -->
          <div class="mt-6 space-y-4 text-xs text-gray-700">
            <!-- CONTACT INFO (email | mobile) -->
            <div class="space-y-1">
              <span class="font-medium text-gray-600"
                >Your Contact Details:</span
              >
              <div>
                <span class="break-words min-w-0 flex-1">
                  <span id="emailVal"></span> | <span id="mobileVal"></span>
                </span>
                <p> </p>
              </div>
            </div>
          </div>
        </div>

        <!-- payment section -->
        <div class="flex flex-col items-center gap-8" style="display: none">
          <div
            class="relative ring-2 ring-red-400 ring-offset-2 ring-offset-white bg-gradient-to-br from-red-50 via-white to-red-100 rounded-xl p-5 shadow-lg space-y-4 glow-box max-w-xl mx-auto"
          >
            <div class="flex items-center gap-2">
              <span class="text-red-600 text-xl animate-bounce">⚠️</span>
              <h3 class="text-red-700 font-extrabold text-xl">
                Booking ID Required in Seat Selection
              </h3>
            </div>

            <div
              class="flex flex-col items-center space-y-3 md:flex-row md:justify-between md:items-center md:space-y-0 md:space-x-4"
            >
              <span
                id="bookingIdVal"
                class="bg-white border border-red-400 text-red-800 font-mono text-2xl md:text-lg px-6 py-2 rounded-full shadow-md glow-animation text-center tracking-wide"
              ></span>
              <button
                type="button"
                id="copyBookingIdBtn"
                class="bg-red-600 hover:bg-red-700 text-white text-base md:text-sm px-6 py-2 md:px-4 md:py-1 rounded-lg font-semibold focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500"
                aria-label="Copy Booking ID"
              >
                Copy Booking ID
              </button>
            </div>

            <p
              class="text-sm text-red-700 leading-relaxed text-center md:text-left"
            >
              Please <strong>mention this Booking ID</strong> in your
              <u>seat confirmation section</u>. Registrations made
              <strong>without this Booking ID & valid payment</strong> will
              <u>not be processed</u>.
            </p>

            <div class="flex items-start gap-2">
              <input
                type="checkbox"
                id="ackCheckbox"
                class="h-4 w-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"
              />
              <label for="ackCheckbox" class="text-sm text-gray-700">
                I have read and understood instructions related to Booking ID
              </label>
            </div>

            <p
              class="text-xs text-red-600 pt-2 border-t border-red-200 mt-3 text-center md:text-left"
            >
              Unsure how to add Booking ID in UPI note?
              <a
                href="upi-note-help.html"
                target="_blank"
                class="underline font-medium hover:text-red-800"
              >
                Click here for help
              </a>
            </p>
          </div>

          <span id="amountDisplay" hidden></span>
        </div>
        <div
          class="flex flex-col md:flex-row items-center justify-between mb-4 space-y-2 md:space-y-0"
        >
          <label
            class="flex items-center gap-2 text-sm text-gray-700 font-medium"
          >
            Select Day:
            <select
              id="daySelector"
              class="border border-pink-300 rounded px-2 py-1 text-sm focus:ring-pink-500 focus:border-pink-500"
            >
              <option value="1">Day 1</option>
              <option value="2">Day 2</option>
              <option value="3">Day 3</option>
            </select>
          </label>
          <button
            id="refreshTableBtn"
            class="bg-pink-600 hover:bg-pink-700 text-white text-sm px-4 py-1 rounded-lg font-medium shadow focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-pink-500"
          >
            Refresh Availability
          </button>
        </div>

        <!-- Availability Table from Google Sheet -->
        <div class="w-full mt-8">
          <h3 class="text-lg font-bold mb-4 text-pink-700 text-center">
            Available Slots Overview
          </h3>
          <div id="sheet-data" class="p-4 max-w-xl mx-auto"></div>

          <div
            id="sheet-data"
            class="overflow-auto rounded-lg border border-pink-200 shadow-md bg-white"
          ></div>
          <!-- Selection Summary Panel -->
          <div id="selectionSummary" class="mt-4 text-center"></div>
        </div>

        <!-- ░ DONE BUTTON ░ -->
        <button
          id="doneBtn"
          type="button"
          class="w-full max-w-3xl bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-semibold shadow focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-500"
        >
          I have completed my payment and booked my slots!
        </button>
        <button
          id="wrongBtn"
          type="button"
          class="w-full max-w-3xl bg-red-600 hover:bg-green-700 text-white py-3 rounded-lg font-semibold shadow focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-500"
        >
          I have completed my payment but cannot find suitable slots.
        </button>

        <script
          src="https://embed.lu.ma/checkout-button.js"
          id="luma-checkout"
        ></script>
        <p class="text-sm text-gray-600 border-t pt-4">
          <strong>Note:</strong> Use the same email and seat count throughout
          the booking. After payment, our team will verify and confirm your
          ticket. You’ll receive a confirmation email once it's done.
        </p>
        <p class="text-sm text-gray-600 border-t pt-4">
          <strong>Refunds:</strong> If your preferred slot isn’t available, you
          can request a refund within 2 hours via
          <a
            href="https://forms.gle/e5BpBj6z9hTnk1Kt7"
            target="_blank"
            class="text-blue-600 underline hover:text-blue-800"
            >this form</a
          >. If tickets are sold out, your payment will be refunded
          automatically within 24 hours.
        </p>
      </section>
    </main>

    <script>
      // Set viewport height for mobile devices
      const setVH = () =>
        document.documentElement.style.setProperty(
          "--vh",
          `${innerHeight * 0.01}px`
        );
      setVH();
      addEventListener("resize", setVH);

      // Parse query parameters
      const params = new URLSearchParams(location.search);
      const email = params.get("email")?.trim() || "";
      const mobile = params.get("mobile")?.trim() || "";
      const seats = +params.get("seats") || 0;
      const bookingId = params.get("code")?.trim() || "";
      // Redirect to payment.html with query params
      const queryParams = new URLSearchParams({
        email,
        mobile,
        seats,
        code: bookingId,
      }).toString();

      if (!email || !mobile || seats < 1 || !bookingId)
        location.replace("initiatepayment.html");

      // Calculate amount
      const amount = seats * 500;

      // Update UI elements
      document.getElementById("seatCount").textContent = seats;
      document.getElementById("amtTitle").textContent = amount;
      document.getElementById("amountDisplay").textContent = amount;
      document.getElementById("emailVal").textContent = email;
      document.getElementById("mobileVal").textContent = mobile;
      document.getElementById("bookingIdVal").textContent = bookingId;

      // Copy helper function
      const copy = async (text, btn) => {
        try {
          // 1) Preferred: Clipboard API on secure contexts
          if (navigator.clipboard && window.isSecureContext) {
            await navigator.clipboard.writeText(text);
          } else {
            // 2) Fallback: hidden textarea + execCommand
            const ta = document.createElement("textarea");
            ta.value = text;
            ta.style.position = "fixed";
            ta.style.opacity = "0";
            document.body.appendChild(ta);
            ta.focus();
            ta.select();
            document.execCommand("copy");
            document.body.removeChild(ta);
          }

          // visual feedback
          btn.classList.add(
            "ring-2",
            "ring-offset-1",
            "ring-green-400",
            "transition",
            "duration-150"
          );
          setTimeout(() => {
            btn.classList.remove("ring-2", "ring-offset-1", "ring-green-400");
          }, 1100);
        } catch (err) {
          alert("Copy failed: " + err);
        }
      };

      // Copy button event handler
      const copyBookingIdBtn = document.getElementById("copyBookingIdBtn");
      copyBookingIdBtn.onclick = () => copy(bookingId, copyBookingIdBtn);

      // Handle "I have completed" button actions
      document.getElementById("doneBtn").onclick = () => {
        location.href = `faq.html?${new URLSearchParams({
          email,
          seats,
          code: bookingId,
          mobile,
        })}`;
      };

      document.getElementById("wrongBtn").onclick = () => {
        location.href =
          "https://www.youtube.com/watch?v=dQw4w9WgXcQ&pp=ygUXbmV2ZXIgZ29ubmEgZ2l2ZSB5b3UgdXA%3D";
      };

      const sheetID = "1Sxrv3iIIdl_6RqAahVZBKKCA-PvzIJXIyz5fkhq0HNc";
      const sheetName = "availability";
      const query = encodeURIComponent("SELECT *");
      const url = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?sheet=${sheetName}&tq=${query}`;

      let allRows = []; // Global data
      let selection = {}; // slotId => selected count
      let totalSelected = 0;

      const maxSeats = +new URLSearchParams(location.search).get("seats") || 0;

      const fetchAndRenderTable = () => {
        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            const json = JSON.parse(data.substring(47).slice(0, -2));
            allRows = json.table.rows;
            allRows.columns = json.table.cols;

            // Revalidate selection based on updated availability
            for (const slotId in selection) {
              const row = allRows.find((r) => r.c[0]?.v === slotId);
              const available = +row?.c[1]?.v || 0;
              if (selection[slotId] > available) {
                totalSelected -= selection[slotId] - available;
                selection[slotId] = available;
              }
            }

            const currentDay =
              +document.getElementById("daySelector").value || 1;
            renderTable(currentDay);
          })
          .catch((error) => {
            console.error("Error loading sheet:", error);
            document.getElementById("sheet-data").innerHTML =
              '<p class="text-red-600 text-center">Failed to load availability data.</p>';
          });
      };

      const renderTable = (day = 1) => {
        const startIdx = (day - 1) * 4;
        const endIdx = startIdx + 4;
        const visibleRows = allRows.slice(startIdx, endIdx);
        const dayLabel =
          visibleRows[0]?.c[0]?.v?.split("Slot")[0]?.replace(/[\s–-]+$/, "") || // remove trailing dash/space
          `Day ${day}`;

        let html = `
<div class="text-xl font-semibold text-pink-700 mb-4">${dayLabel}</div>
<div class="space-y-4">`; // stack slot cards with spacing

        visibleRows.forEach((row, i) => {
          const slotId = row.c[0]?.v || `Slot${i}`;
          const freeSlots = +row.c[1]?.v || 0;
          const processing = +row.c[2]?.v || 0;
          const booked = +row.c[3]?.v || 0;
          const selected = selection[slotId] || 0;

          const disableMinus = selected <= 0;
          const disablePlus =
            selected >= freeSlots || totalSelected >= maxSeats;

          html += `
  <div class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm hover:shadow-md transition-shadow">
    <div class="text-md font-semibold text-gray-800 mb-2">${slotId}</div>
    
    <div class="flex flex-wrap gap-2 text-sm mb-2">
      <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full">Free: ${freeSlots}</span>
      <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">Processing: ${processing}</span>
      <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full">Booked: ${booked}</span>
    </div>
    
    <div class="flex items-center gap-2 text-sm text-gray-700">
      <span class="font-medium">Selected: ${selected}</span>
      <button data-slot="${slotId}" class="decBtn px-2 py-1 bg-gray-200 text-gray-800 rounded-full text-xs font-semibold ${
            disableMinus ? "opacity-50 cursor-not-allowed" : "hover:bg-gray-300"
          }" ${disableMinus ? "disabled" : ""}>–</button>
      <button data-slot="${slotId}" class="incBtn px-2 py-1 bg-pink-500 text-white rounded-full text-xs font-semibold ${
            disablePlus ? "opacity-50 cursor-not-allowed" : "hover:bg-pink-600"
          }" ${disablePlus ? "disabled" : ""}>+</button>
    </div>
  </div>`;
        });

        html += `</div>`; // close slot cards container

        // Inject into page
        document.getElementById("sheet-data").innerHTML = html;

        // Attach button event listeners
        document.querySelectorAll(".incBtn").forEach((btn) => {
          btn.onclick = () => updateSelection(btn.dataset.slot, 1);
        });

        document.querySelectorAll(".decBtn").forEach((btn) => {
          btn.onclick = () => updateSelection(btn.dataset.slot, -1);
        });

        updateSummary();
      };

      const updateSelection = (slotId, delta) => {
        const row = allRows.find((r) => r.c[0]?.v === slotId);
        const available = +row?.c[1]?.v || 0;
        const current = selection[slotId] || 0;

        if (delta === 1 && totalSelected < maxSeats && current < available) {
          selection[slotId] = current + 1;
          totalSelected++;
        } else if (delta === -1 && current > 0) {
          selection[slotId] = current - 1;
          totalSelected--;
        }

        renderTable(+document.getElementById("daySelector").value);
      };

      const updateSummary = () => {
        const summaryDiv = document.getElementById("selectionSummary");
        summaryDiv.innerHTML = `
          <p class="text-sm text-gray-700 mb-2">
            Selected <strong>${totalSelected}</strong> of <strong>${maxSeats}</strong> seat(s)
          </p>
          <button id="confirmBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded shadow ${
            totalSelected !== maxSeats ? "opacity-50 cursor-not-allowed" : ""
          }" ${totalSelected !== maxSeats ? "disabled" : ""}>
            Confirm Slot Selection
          </button>`;

        const confirmBtn = document.getElementById("confirmBtn");
        if (confirmBtn) {
          confirmBtn.onclick = () => confirmSlotSelection();
        }
      };
      const confirmSlotSelection = async () => {
        try {
          const bookingId = new URLSearchParams(location.search)
            .get("code")
            ?.trim();
          if (!bookingId) {
            alert("Invalid booking ID.");
            return;
          }

          // Show loading modal
          document.getElementById("loadingModal").classList.remove("hidden");

          // Step 1: Fetch Slot Blocking Sources to check active status
          const sheetID = "1Sxrv3iIIdl_6RqAahVZBKKCA-PvzIJXIyz5fkhq0HNc";
          const blockingSheet = "Slot Blocking Sources";
          const query = encodeURIComponent("SELECT *");
          const blockingUrl = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?sheet=${blockingSheet}&tq=${query}`;
          const response = await fetch(blockingUrl);
          const data = await response.text();
          const json = JSON.parse(data.substring(47).slice(0, -2));
          const rows = json.table.rows;

          const hasActiveProcessing = rows.some((row) => {
            const rowBookingId = row.c[3]?.v ? String(row.c[3].v).trim() : "";
            const status = row.c[4]?.v ? String(row.c[4].v).trim() : "";
            const activity = row.c[6]?.v ? String(row.c[6].v).trim() : "";

            const match =
              rowBookingId === bookingId &&
              status === "Processing" &&
              activity === "Active";
            if (match)
              console.log("MATCH FOUND:", rowBookingId, status, activity);
            return match;
          });

          if (hasActiveProcessing) {
            document.getElementById("loadingModal").classList.add("hidden");
            document
              .getElementById("paymentPromptModal")
              .classList.remove("hidden");

            document.getElementById("proceedToPaymentBtn").onclick = () => {
              window.location.href = `payment.html?${queryParams}`;
            };

            return; // ✅ Stop execution, prevent new form submission
          }

          // Step 2: Fetch slot availability and validate
          const availabilitySheet = "availability";
          const availabilityUrl = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?sheet=${availabilitySheet}&tq=${query}`;
          const availResponse = await fetch(availabilityUrl);
          const availData = await availResponse.text();
          const availJson = JSON.parse(availData.substring(47).slice(0, -2));
          const latestRows = availJson.table.rows;

          for (let slotId in selection) {
            const selectedCount = selection[slotId];
            if (selectedCount === 0) continue;

            const row = latestRows.find((r) => r.c[0]?.v === slotId);
            const available = +row?.c[1]?.v || 0;
            if (available < selectedCount) {
              alert(
                `Slot ${slotId} no longer has enough availability. Please try again later.`
              );
              document.getElementById("loadingModal").classList.add("hidden");
              return;
            }
          }

          // Step 3: Submit form for each selected slot
          const formBaseURL =
            "https://docs.google.com/forms/d/e/1FAIpQLSdKvVjiL3W356UZsWKy0BBRpqHxoFN7Q_5UQHUKlQDjxpNxBA/formResponse";
          const email = new URLSearchParams(location.search)
            .get("email")
            ?.trim();
          const mobile = new URLSearchParams(location.search)
            .get("mobile")
            ?.trim();
          const seats = new URLSearchParams(location.search)
            .get("seats")
            ?.trim();
          const dayVal = document.getElementById("daySelector").value;
          const dayCode = `D${dayVal}`;

          for (let slotId in selection) {
            const count = selection[slotId];
            if (count === 0) continue;

            const slotMatch = slotId.match(/Slot\s*(\d+)/);
            const slotCode = slotMatch ? `S${slotMatch[1]}` : "S1";

            for (let i = 0; i < count; i++) {
              const formData = new FormData();
              formData.append("entry.706936465", dayCode); // Day
              formData.append("entry.1380648863", slotCode); // Slot
              formData.append("entry.1536265716", bookingId); // Booking ID
              formData.append("entry.38505346", "Processing"); // Status

              await fetch(formBaseURL, {
                method: "POST",
                mode: "no-cors",
                body: formData,
              });

              await new Promise((r) => setTimeout(r, 200)); // avoid rate limit
            }
          }

          window.location.href = `payment.html?${queryParams}`;
        } catch (error) {
          console.error("Error during slot confirmation:", error);
          alert(
            "An error occurred while confirming your slots. Please try again."
          );
          document.getElementById("loadingModal").classList.add("hidden");
        }
      };

      document.getElementById("daySelector").onchange = (e) => {
        renderTable(+e.target.value);
      };
      document.getElementById("refreshTableBtn").onclick = () => {
        fetchAndRenderTable();
      };

      fetchAndRenderTable();
      setInterval(fetchAndRenderTable, 15000);
    </script>

    <div
      id="loadingModal"
      class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden"
    >
      <div
        class="bg-white rounded-xl p-6 shadow-xl text-center max-w-xs flex flex-col items-center"
      >
        <div
          class="w-10 h-10 border-4 border-pink-500 border-t-transparent rounded-full spinner mb-4 animate-spin"
        ></div>
        <h2 class="text-lg font-semibold text-pink-700">
          Registering your details…
        </h2>
        <p class="text-sm text-gray-600 mt-2">Please wait a moment.</p>
      </div>
    </div>
    <style>
      .spinner {
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
    <div
      id="paymentPromptModal"
      class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden"
    >
      <div
        class="bg-white rounded-xl p-6 shadow-xl text-center max-w-xs flex flex-col items-center"
      >
        <h2 class="text-lg font-semibold text-pink-700 mb-2">
          Proceed to Payment
        </h2>
        <p class="text-sm text-gray-600 mb-4">
          Oops! It seems that you have already selected your slots in a previous
          booking attempt for your existing Booking ID. Please complete payment
          for your selected slots on the next page before the timer expires. In
          case you wish to change your slot, please start a fresh booking.
        </p>
        <button
          id="proceedToPaymentBtn"
          class="bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded shadow"
        >
          Continue
        </button>
      </div>
    </div>
  </body>
</html>
